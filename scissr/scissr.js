define("parser",["configuration"],function(e){var t=function(){function t(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function n(e,t,n,r,i,s){this.message=e,this.expected=t,this.found=n,this.offset=r,this.line=i,this.column=s,this.name="SyntaxError"}function r(t){function yt(){return t.substring(ct,lt)}function bt(){return ct}function wt(){return Tt(ct).line}function Et(){return Tt(ct).column}function St(e){throw Ct(null,[{type:"other",description:e}],ct)}function xt(e){throw Ct(e,null,ct)}function Tt(e){function n(e,n,r){var i,s;for(i=n;i<r;i++)s=t.charAt(i),s==="\n"?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):s==="\r"||s==="\u2028"||s==="\u2029"?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1)}return ht!==e&&(ht>e&&(ht=0,pt={line:1,column:1,seenCR:!1}),n(pt,ht,e),ht=e),pt}function Nt(e){if(lt<dt)return;lt>dt&&(dt=lt,vt=[]),vt.push(e)}function Ct(e,r,i){function s(e){var t=1;e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});while(t<e.length)e[t-1]===e[t]?e.splice(t,1):t++}function o(e,t){function n(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0180-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1080-\uFFFF]/g,function(e){return"\\u"+t(e)})}var r=new Array(e.length),i,s,o;for(o=0;o<e.length;o++)r[o]=e[o].description;return i=e.length>1?r.slice(0,-1).join(", ")+" or "+r[e.length-1]:r[0],s=t?'"'+n(t)+'"':"end of input","Expected "+i+" but "+s+" found."}var u=Tt(i),a=i<t.length?t.charAt(i):null;return r!==null&&s(r),new n(e!==null?e:o(r,a),r,a,i,u.line,u.column)}function kt(){var e,t,n,r,s;return e=lt,t=Lt(),t!==i?(n=lt,r=Rt(),r!==i?(s=Ut(),s!==i?(ct=n,r=f(s),n=r):(lt=n,n=u)):(lt=n,n=u),n===i&&(n=a),n!==i?(ct=e,t=l(t,n),e=t):(lt=e,e=u)):(lt=e,e=u),e}function Lt(){var e,t,n,r,s,o,f;e=lt,t=lt,n=At();if(n!==i){r=[],s=lt,o=zt(),o!==i?(f=At(),f!==i?(ct=s,o=h(f),s=o):(lt=s,s=u)):(lt=s,s=u);while(s!==i)r.push(s),s=lt,o=zt(),o!==i?(f=At(),f!==i?(ct=s,o=h(f),s=o):(lt=s,s=u)):(lt=s,s=u);r!==i?(ct=t,n=p(n,r),t=n):(lt=t,t=u)}else lt=t,t=u;return t===i&&(t=a),t!==i&&(ct=e,t=d(t)),e=t,e}function At(){var e,t,n,r,s,o;return e=lt,t=Ot(),t===i&&(t=a),t!==i?(n=_t(),n!==i?(r=Pt(),r===i&&(r=a),r!==i?(ct=e,t=v(t,n,r),e=t):(lt=e,e=u)):(lt=e,e=u)):(lt=e,e=u),e===i&&(e=lt,t=Ot(),t===i&&(t=a),t!==i?(n=lt,r=Xt(),r!==i?(s=Lt(),s!==i?(o=Vt(),o!==i?(ct=n,r=m(s),n=r):(lt=n,n=u)):(lt=n,n=u)):(lt=n,n=u),n!==i?(r=Dt(),r===i&&(r=a),r!==i?(ct=e,t=g(t,n,r),e=t):(lt=e,e=u)):(lt=e,e=u)):(lt=e,e=u)),e}function Ot(){var e,t,n,r,s;return mt++,e=lt,t=Wt(),t===i&&(t=a),t!==i?(n=jt(),n!==i?(r=Wt(),r===i&&(r=a),r!==i?(s=It(),s!==i?(ct=e,t=b(t,n,r),e=t):(lt=e,e=u)):(lt=e,e=u)):(lt=e,e=u)):(lt=e,e=u),mt--,e===i&&(t=i,mt===0&&Nt(y)),e}function Mt(){var e,n;e=[],w.test(t.charAt(lt))?(n=t.charAt(lt),lt++):(n=i,mt===0&&Nt(E));if(n!==i)while(n!==i)e.push(n),w.test(t.charAt(lt))?(n=t.charAt(lt),lt++):(n=i,mt===0&&Nt(E));else e=u;return e}function _t(){var e,t,n,r;return mt++,e=lt,t=Wt(),t!==i?(n=jt(),n!==i?(r=Wt(),r!==i?(ct=e,t=x(t,n,r),e=t):(lt=e,e=u)):(lt=e,e=u)):(lt=e,e=u),e===i&&(e=lt,t=Mt(),t!==i&&(ct=e,t=T(t)),e=t),mt--,e===i&&(t=i,mt===0&&Nt(S)),e}function Dt(){var e,t,n;return e=lt,t=Bt(),t!==i?(n=Ft(),n!==i?(ct=e,t=N(n),e=t):(lt=e,e=u)):(lt=e,e=u),e}function Pt(){var e,t,n;return e=lt,t=Ht(),t!==i?(n=Ft(),n!==i?(ct=e,t=C(n),e=t):(lt=e,e=u)):(lt=e,e=u),e}function Ht(){var e,n;return mt++,t.charCodeAt(lt)===64?(e=L,lt++):(e=i,mt===0&&Nt(A)),mt--,e===i&&(n=i,mt===0&&Nt(k)),e}function Bt(){var e,n;return mt++,t.charCodeAt(lt)===42?(e=M,lt++):(e=i,mt===0&&Nt(_)),mt--,e===i&&(n=i,mt===0&&Nt(O)),e}function jt(){var e,n;mt++,e=[],P.test(t.charAt(lt))?(n=t.charAt(lt),lt++):(n=i,mt===0&&Nt(H));if(n!==i)while(n!==i)e.push(n),P.test(t.charAt(lt))?(n=t.charAt(lt),lt++):(n=i,mt===0&&Nt(H));else e=u;return mt--,e===i&&(n=i,mt===0&&Nt(D)),e}function Ft(){var e,n,r;e=lt,n=[],B.test(t.charAt(lt))?(r=t.charAt(lt),lt++):(r=i,mt===0&&Nt(j));if(r!==i)while(r!==i)n.push(r),B.test(t.charAt(lt))?(r=t.charAt(lt),lt++):(r=i,mt===0&&Nt(j));else n=u;return n!==i&&(ct=e,n=F(n)),e=n,e}function It(){var e,n;return mt++,t.charCodeAt(lt)===58?(e=q,lt++):(e=i,mt===0&&Nt(R)),mt--,e===i&&(n=i,mt===0&&Nt(I)),e}function qt(){var e,n;e=[],t.charCodeAt(lt)===32?(n=U,lt++):(n=i,mt===0&&Nt(z));if(n!==i)while(n!==i)e.push(n),t.charCodeAt(lt)===32?(n=U,lt++):(n=i,mt===0&&Nt(z));else e=u;return e}function Rt(){var e,n;return mt++,t.charCodeAt(lt)===61?(e=X,lt++):(e=i,mt===0&&Nt(V)),mt--,e===i&&(n=i,mt===0&&Nt(W)),e}function Ut(){var e,n;return mt++,t.substr(lt,4)===J?(e=J,lt+=4):(e=i,mt===0&&Nt(K)),e===i&&(t.substr(lt,3)===Q?(e=Q,lt+=3):(e=i,mt===0&&Nt(G))),mt--,e===i&&(n=i,mt===0&&Nt($)),e}function zt(){var e,n;return mt++,t.charCodeAt(lt)===44?(e=Z,lt++):(e=i,mt===0&&Nt(et)),mt--,e===i&&(n=i,mt===0&&Nt(Y)),e}function Wt(){var e,n;return mt++,t.charCodeAt(lt)===39?(e=nt,lt++):(e=i,mt===0&&Nt(rt)),mt--,e===i&&(n=i,mt===0&&Nt(tt)),e}function Xt(){var e,n;return mt++,t.charCodeAt(lt)===40?(e=st,lt++):(e=i,mt===0&&Nt(ot)),mt--,e===i&&(n=i,mt===0&&Nt(it)),e}function Vt(){var e,n;return mt++,t.charCodeAt(lt)===41?(e=at,lt++):(e=i,mt===0&&Nt(ft)),mt--,e===i&&(n=i,mt===0&&Nt(ut)),e}function $t(e,t){return{parser:"scissr",generator:e!==null?e:"json",nodes:t}}function Jt(e){return{name:e}}function Kt(t,n){if(t.value!==undefined)return"string";var r="string";if(e.types[t.name]!==undefined)r=t.name;else if(t.name==="object"||n!==null&&n.isComplexType==1)r="object";return r}function Qt(e,t,n,r,i){var s=Kt(e,r),o={type:e.name,baseType:s,isArray:!1,count:1,data:[]};return e.value!==undefined&&(o.value=e.value),n!==null&&(o.nodes=n),r!==null&&(o.isArray=!0,o.count=parseInt(r.count)),t!==null?o.alias=t:o.isArray?o.alias=e.name+"Array":o.alias=e.name,o}var r=arguments.length>1?arguments[1]:{},i={},s={tree:kt},o=kt,u=i,a=null,f=function(e){return e},l=function(e,t){return $t(t,e)},c=[],h=function(e){return e},p=function(e,t){return[e].concat(t)},d=function(e){return e!==null?e:[]},v=function(e,t,n){return Qt(t,e,undefined,n)},m=function(e){return e},g=function(e,t,n){var r={name:"object"};return Qt(r,e,t,n,"test")},y={type:"other",description:"alias"},b=function(e,t,n){if(e!=n)throw new Error("Unterminated string constant.");return t.join("")},w=/^[0-9a-zA-Z]/,E={type:"class",value:"[0-9a-zA-Z]",description:"[0-9a-zA-Z]"},S={type:"other",description:"type"},x=function(e,t,n){if(e!=n)throw new Error("Unterminated string constant.");return{name:"string",value:t.join("")}},T=function(e){if(e===null)throw new Error("Type expected.");return{name:e.join("")}},N=function(e){return{isComplexType:!0,count:e}},C=function(e){return{isComplexType:!1,count:e}},k={type:"other",description:"simple type array identifier"},L="@",A={type:"literal",value:"@",description:'"@"'},O={type:"other",description:"complex type array identifier"},M="*",_={type:"literal",value:"*",description:'"*"'},D={type:"other",description:"literal value"},P=/^[0-9A-Za-z_ ]/,H={type:"class",value:"[0-9A-Za-z_ ]",description:"[0-9A-Za-z_ ]"},B=/^[0-9]/,j={type:"class",value:"[0-9]",description:"[0-9]"},F=function(e){return parseInt(e.join(""))},I={type:"other",description:"colon (:)"},q=":",R={type:"literal",value:":",description:'":"'},U=" ",z={type:"literal",value:" ",description:'" "'},W={type:"other",description:"format specifier (=)"},X="=",V={type:"literal",value:"=",description:'"="'},$={type:"other",description:"generator"},J="json",K={type:"literal",value:"json",description:'"json"'},Q="xml",G={type:"literal",value:"xml",description:'"xml"'},Y={type:"other",description:"seperator (,)"},Z=",",et={type:"literal",value:",",description:'","'},tt={type:"other",description:"quote (')"},nt="'",rt={type:"literal",value:"'",description:'"\'"'},it={type:"other",description:"'('"},st="(",ot={type:"literal",value:"(",description:'"("'},ut={type:"other",description:"')'"},at=")",ft={type:"literal",value:")",description:'")"'},lt=0,ct=0,ht=0,pt={line:1,column:1,seenCR:!1},dt=0,vt=[],mt=0,gt;if("startRule"in r){if(!(r.startRule in s))throw new Error("Can't start parsing from rule \""+r.startRule+'".');o=s[r.startRule]}gt=o();if(gt!==i&&lt===t.length)return gt;throw gt!==i&&lt<t.length&&Nt({type:"end",description:"end of input"}),Ct(null,vt,dt)}return t(n,Error),{SyntaxError:n,parse:r}}();return{parse:t.parse}}),define("generator",["configuration"],function(e){function t(t){var n=e.generators[t.generator];if(n===undefined)throw"generator '"+t.generator+"' not registered!";var r=new n.generator(t,e);return r.generate()}return{generate:t}}),define("scissr",["parser","generator"],function(e,t){function n(n){var r=e.parse(n),i=t.generate(r);return{header:{generator:r.generator},body:i}}return{transform:n}});